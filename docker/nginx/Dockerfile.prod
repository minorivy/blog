FROM valian/docker-nginx-auto-ssl

ARG server_name
ARG TIMEZONE

# Install extensions
RUN apk add --no-cache bash tzdata vim \
	&& cp /usr/share/zoneinfo/$TIMEZONE /etc/localtime \
	&& apk del tzdata \
	&& rm -rf /var/cache/apk/*

HEALTHCHECK --interval=5m --timeout=3s \
  CMD curl -f https://${server_name}/ || exit 1

RUN addgroup -g 1000 -S www-data \
	&& adduser -u 1000 -D -S -G www-data www-data
